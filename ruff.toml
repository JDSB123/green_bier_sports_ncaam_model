# Ruff Configuration - Fast Python linter and formatter
# https://docs.astral.sh/ruff/

target-version = "py312"
line-length = 100

# Most code in `testing/scripts/` is intentionally "script-y" (ad-hoc analysis,
# one-off runners, local tooling) and doesn't follow the same strict lint rules
# as production/library code.
exclude = [
  "testing/scripts",
  "services/prediction-service-python/scripts",
]

[lint]
select = [
  "E",   # pycodestyle errors
  "W",   # pycodestyle warnings
  "F",   # pyflakes
  "I",   # isort (import sorting)
  "N",   # pep8-naming
  "UP",  # pyupgrade
  "B",   # flake8-bugbear
  "C4",  # flake8-comprehensions
  "SIM", # flake8-simplify
  "RET", # flake8-return
  "PTH", # flake8-use-pathlib
]

ignore = [
  "E501", # line too long (handled by formatter)
  "B008", # do not perform function call in argument defaults
  "B904", # raise without from inside except
]

# Allow autofix for all enabled rules
fixable = ["ALL"]
unfixable = []

[lint.per-file-ignores]
"__init__.py" = ["F401"] # Allow unused imports in __init__.py
"tests/**/*.py" = [
  "S101", # Allow assert in tests
  "ARG",  # Allow unused function arguments in tests
  "FBT",  # Allow boolean positional values in tests
]

[format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "lf"

[lint.isort]
known-first-party = ["app"]
